import{a as J,r,j as e,S as se,B as x,y as ae,z as ne,D as Q,E as re,i as W,g as ie,G as X,H as le,I as Y,J as ce,K as de,M as oe,O as Z,P as me,Q as he,R as ue,T as ge,C as xe}from"./index-DJ6heuhN.js";import{C as L,a as M}from"./Col-CVcr12c0.js";import{F as g}from"./Form-CAs2HNNt.js";import{T as K}from"./Table-AEJMv9Oz.js";import{P as q,R as ee}from"./Row-BeZ3OMNg.js";import{I as te,c as je,e as fe,d as pe,g as ve}from"./index-B9C_FHU2.js";const H={1:"Registrado",2:"Cocinando",3:"Entregando",4:"Entregada"};function Ce(){const{role:a}=J(),[d,S]=r.useState({}),[k,c]=r.useState([]),[h,p]=r.useState(null),[U,j]=r.useState(null),[A,N]=r.useState(null),[P,E]=r.useState(null),[v,w]=r.useState(1),[b,R]=r.useState(10),[O,i]=r.useState(0),[o,I]=r.useState(!1),[z,G]=r.useState(),B=Math.ceil(O/b),_=n=>a!=null&&a.chef&&(a!=null&&a.delivery)?n.state>=1&&n.state<=3:a!=null&&a.chef?n.state>=1&&n.state<3:a!=null&&a.delivery?n.state===3:!1,T=n=>a!=null&&a.chef&&(a!=null&&a.delivery)?!0:a!=null&&a.chef?n.state>=1&&n.state<=3:a!=null&&a.delivery?n.state>=3&&n.state<=4:!1,m=()=>a!=null&&a.chef&&(a!=null&&a.delivery)?[1,2,3,4]:a!=null&&a.chef?[1,2,3]:a!=null&&a.delivery?[3,4]:[],y=async n=>{if(!(a!=null&&a.manageUser))return;const u=Array.from(new Set(n.map(f=>f.userId))),$={};for(const f of u)try{const V=await re(f,"username");$[f]=V.username}catch{console.error(`No se pudo obtener el usuario con ID ${f}`)}S($)},t=async()=>{I(!0);const{totalItems:n,orders:u}=await ae(v,b,z);c(u),i(n),I(!1),y(u)};r.useEffect(()=>{t()},[v,b,z]);const s=n=>{R(Number(n.target.value)),w(1)},l=n=>{if(n.target.value==="")G(void 0);else{const u=Number(n.target.value);G(u),console.log(n.target.value)}w(1)},C=async n=>{const u=await ne(n);u&&(p(u),j(n))},F=async n=>{const u=await Q(n);u&&(c($=>$.map(f=>f.id===n?{...f,state:u.state}:f)),(h==null?void 0:h.id)===n&&p(u))},D=async n=>{if(P===null)return;const u=await Q(n,P);u&&(c($=>$.map(f=>f.id===n?{...f,state:u.state}:f)),(h==null?void 0:h.id)===n&&p(u),N(null),E(null))};return e.jsx(L,{className:"mb-4",children:e.jsxs(L.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"Órdenes de Usuarios"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(g.Select,{value:z??"",onChange:l,style:{width:150},children:[e.jsx("option",{value:"",children:"Todos"}),Object.entries(H).map(([n,u])=>e.jsx("option",{value:n,children:u},n))]}),e.jsxs(g.Select,{value:b,onChange:s,style:{width:150},children:[e.jsx("option",{value:5,children:"5 por página"}),e.jsx("option",{value:10,children:"10 por página"}),e.jsx("option",{value:20,children:"20 por página"})]})]})]}),o?e.jsx("div",{className:"text-center py-4",children:e.jsx(se,{animation:"border"})}):e.jsxs(K,{bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Usuario"}),e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Productos"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:k.map(n=>{const u=U===n.id,$=A===n.id;return e.jsx(r.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:n.id}),e.jsx("td",{children:a!=null&&a.manageUser?d[n.userId]??n.userId:n.userId}),e.jsx("td",{children:new Date(n.createdAt).toLocaleString()}),e.jsx("td",{children:u&&(h==null?void 0:h.id)===n.id&&e.jsx("ul",{className:"mb-0",children:h.items.map(f=>e.jsxs("li",{children:[f.productName," x ",f.quantity," - $",f.price.toFixed(2)]},f.id))})}),e.jsxs("td",{children:["$",n.totalPrice.toFixed(2)]}),e.jsx("td",{children:$?e.jsx(g.Select,{size:"sm",value:P??n.state,onChange:f=>E(Number(f.target.value)),children:Object.entries(H).filter(([f])=>m().includes(Number(f))).map(([f,V])=>e.jsx("option",{value:f,children:V},f))}):H[n.state]}),e.jsx("td",{children:$?e.jsxs(e.Fragment,{children:[e.jsx(x,{size:"sm",variant:"success",onClick:()=>D(n.id),children:"Guardar"}),e.jsx(x,{size:"sm",variant:"secondary",className:"ms-2",onClick:()=>N(null),children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{size:"sm",variant:"info",onClick:()=>u?j(null):C(n.id),children:u?"Ocultar":"Ver Detalles"}),_(n)&&e.jsx(x,{size:"sm",variant:"primary",className:"ms-2",onClick:()=>F(n.id),children:"Siguiente Estado"}),T(n)&&e.jsx(x,{size:"sm",variant:"warning",className:"ms-2",onClick:()=>{N(n.id),E(n.state),j(null)},children:"Editar"})]})})]})},n.id)})})]}),B>1&&e.jsx(q,{children:Array.from({length:B},(n,u)=>e.jsx(q.Item,{active:u+1===v,onClick:()=>w(u+1),children:u+1},u+1))})]})})}function ye({categories:a}){const[d,S]=r.useState([]),[k,c]=r.useState(1),[h,p]=r.useState(10),[U,j]=r.useState(0),[A,N]=r.useState(!1),[P,E]=r.useState(null),[v,w]=r.useState({name:"",image:"",category:0,price:0}),[b,R]=r.useState({name:"",image:"",category:0,price:0}),[O,i]=r.useState(null),[o,I]=r.useState(null),z=Math.ceil(U/h),G=async()=>{N(!0);const{products:t,totalItems:s}=await ie(k,h);S(t),j(s),N(!1)};r.useEffect(()=>{G()},[k,h]);const B=t=>{p(Number(t.target.value)),c(1)},_=async()=>{const{name:t,category:s,price:l}=v;if(t.trim()===""||!O||s<0||l<=0){alert("Por favor completa todos los campos.");return}const F=`product/${O.name.replace(/\s+/g,"_")}`;try{if(!await X(F,O))throw new Error("No se pudo subir la imagen");const n=await le({...v,image:F});n&&(S([...d,n]),w({name:"",image:"",category:0,price:0}),i(null))}catch(D){console.error("Error al crear producto:",D),alert("No se pudo crear el producto.")}},T=t=>{E(t.id),R({name:t.name,image:t.image,category:t.category,price:t.price})},m=async t=>{try{let s=b.image;o&&(s=`product/${o.name.replace(/\s+/g,"_")}`,await Y(s,o)),await ce(t,{...b,image:s}),S(l=>l.map(C=>C.id===t?{...C,...b,image:s}:C)),E(null),I(null)}catch{alert("Error al guardar el producto.")}},y=async t=>{if(window.confirm("¿Estás seguro de que deseas eliminar este producto?"))try{await de(t),S(d.filter(l=>l.id!==t))}catch{alert("Error al eliminar el producto.")}};return A?e.jsx("div",{children:"Cargando productos..."}):e.jsx(L,{className:"mb-4",children:e.jsxs(L.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"Productos"}),e.jsxs(g.Select,{style:{width:"150px"},value:h,onChange:B,children:[e.jsx("option",{value:5,children:"5 por página"}),e.jsx("option",{value:10,children:"10 por página"}),e.jsx("option",{value:20,children:"20 por página"})]})]}),e.jsx(g,{className:"mb-4",children:e.jsxs(ee,{children:[e.jsx(M,{md:3,children:e.jsx(g.Control,{type:"file",accept:"image/*",onChange:t=>{var C;const l=((C=t.target.files)==null?void 0:C[0])||null;i(l)}})}),e.jsx(M,{md:3,children:e.jsx(g.Control,{type:"text",placeholder:"Nombre",value:v.name,onChange:t=>w({...v,name:t.target.value})})}),e.jsx(M,{md:3,children:e.jsx(g.Select,{value:v.category,onChange:t=>w({...v,category:parseInt(t.target.value)}),children:a.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})}),e.jsx(M,{md:2,children:e.jsx(g.Control,{type:"number",placeholder:"Precio ($)",value:v.price===0?"":v.price,onChange:t=>w({...v,price:parseFloat(t.target.value)||0})})}),e.jsx(M,{md:1,children:e.jsx(x,{onClick:_,children:"Agregar"})})]})}),e.jsxs(K,{bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Categoría"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:d.map(t=>{var s;return e.jsxs("tr",{children:[e.jsx("td",{children:P===t.id?e.jsx(g.Control,{type:"file",accept:"image/*",onChange:l=>{var D;const F=((D=l.target.files)==null?void 0:D[0])||null;I(F)}}):e.jsx(te,{src:W+t.image,alt:t.name,rounded:!0,style:{width:"60px",height:"60px",objectFit:"cover"}})}),e.jsx("td",{children:t.id}),e.jsx("td",{children:P===t.id?e.jsx(g.Control,{type:"text",value:b.name,onChange:l=>R({...b,name:l.target.value})}):t.name}),e.jsx("td",{children:P===t.id?e.jsx(g.Select,{value:b.category,onChange:l=>R({...b,category:parseInt(l.target.value)}),children:a.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))}):(s=a.find(l=>l.id===t.category))==null?void 0:s.name}),e.jsx("td",{children:P===t.id?e.jsx(g.Control,{type:"number",placeholder:"Precio ($)",value:b.price===0?"":b.price,onChange:l=>R({...b,price:parseFloat(l.target.value)||0})}):`$${t.price.toFixed(2)}`}),e.jsx("td",{children:P===t.id?e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"success",size:"sm",onClick:()=>m(t.id),children:"Guardar"}),e.jsx(x,{variant:"secondary",size:"sm",className:"ms-2",onClick:()=>E(null),children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"warning",size:"sm",onClick:()=>T(t),children:"Editar"}),e.jsx(x,{variant:"danger",size:"sm",className:"ms-2",onClick:()=>y(t.id),children:"Eliminar"})]})})]},t.id)})})]}),z>1&&e.jsx(q,{children:[...Array(z)].map((t,s)=>e.jsx(q.Item,{active:s+1===k,onClick:()=>c(s+1),children:s+1},s+1))})]})})}function Se(){const{user:a,role:d}=J(),[S,k]=r.useState([]),[c,h]=r.useState(1),[p,U]=r.useState(10),[j,A]=r.useState(!1),[N,P]=r.useState(null),[E,v]=r.useState({fullname:"",username:"",email:"",password:"",role:0}),[w,b]=r.useState([]),[R,O]=r.useState(!1),i=S.length,o=Math.ceil(i/p),I=S.slice((c-1)*p,c*p);r.useEffect(()=>{(async()=>{A(!0);try{const[{users:y},t]=await Promise.all([oe(c,p),Z()]);k(y),b(t)}catch(y){console.error("Error cargando usuarios o roles:",y)}A(!1)})()},[c,p]);const z=m=>{U(Number(m.target.value)),h(1)},G=m=>{P(m.id),v({...m,password:""})},B=async m=>{try{const y={...E};y.password||delete y.password;const t=await me(m,y);k(s=>s.map(l=>l.id===m?t:l)),P(null),v({fullname:"",username:"",email:"",password:"",role:0})}catch{alert("Error al guardar los cambios.")}},_=m=>{var s;if(d!=null&&d.promoteAll)return!0;const y=(d==null?void 0:d.id)===m.role,t=(s=w.find(l=>l.id===m.role))==null?void 0:s.default;return y||t||(d==null?void 0:d.editPassword)},T=S.some(_);return j?e.jsx("div",{children:"Cargando usuarios..."}):e.jsx(L,{className:"mb-4",children:e.jsxs(L.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"Usuarios"}),e.jsxs(g.Select,{style:{width:"150px"},value:p,onChange:z,children:[e.jsx("option",{value:5,children:"5 por página"}),e.jsx("option",{value:10,children:"10 por página"}),e.jsx("option",{value:20,children:"20 por página"})]})]}),e.jsxs(K,{bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Nombre Completo"}),e.jsx("th",{children:"Usuario"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rol"}),e.jsx("th",{children:"Contraseña"}),T&&e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:I.map(m=>{var t;const y=_(m);return m.id===(a==null?void 0:a.id)?null:e.jsxs("tr",{children:[e.jsx("td",{children:m.id}),e.jsx("td",{children:m.fullname}),e.jsx("td",{children:m.username}),e.jsx("td",{children:m.email}),e.jsx("td",{children:N===m.id?e.jsx(g.Select,{value:E.role??0,onChange:s=>v({...E,role:parseInt(s.target.value)}),children:d!=null&&d.promoteAll?w.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id)):w.filter(s=>s.default||s.id===(d==null?void 0:d.id)).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}):((t=w.find(s=>s.id===m.role))==null?void 0:t.name)??"Sin rol"}),e.jsx("td",{children:d!=null&&d.editPassword&&N===m.id?e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(g.Control,{type:R?"text":"password",placeholder:"Nueva contraseña",value:E.password||"",onChange:s=>v({...E,password:s.target.value})}),e.jsx(x,{variant:"outline-secondary",size:"sm",className:"ms-2",onClick:()=>O(!R),children:R?"Ocultar":"Ver"})]}):"••••••••"}),T&&e.jsx("td",{children:N===m.id?e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"success",size:"sm",onClick:()=>B(m.id),children:"Guardar"}),e.jsx(x,{variant:"secondary",size:"sm",className:"ms-2",onClick:()=>P(null),children:"Cancelar"})]}):y?e.jsx(x,{variant:"warning",size:"sm",onClick:()=>G(m),children:"Editar"}):"-"})]},m.id)})})]}),o>1&&e.jsx(q,{children:Array.from({length:o},(m,y)=>e.jsx(q.Item,{active:y+1===c,onClick:()=>h(y+1),children:y+1},y+1))})]})})}function be(){const[a,d]=r.useState([]),[S,k]=r.useState(null),[c,h]=r.useState(!1),[p,U]=r.useState({}),[j,A]=r.useState({name:"",default:!1,manageProduct:!1,manageOrder:!1,manageUser:!1,manageRole:!1,promoteAll:!1,editPassword:!1,chef:!1,delivery:!1}),N=["default","manageProduct","manageOrder","manageUser","manageRole","promoteAll","editPassword","chef","delivery"],P={name:"Nombre",id:"ID",default:"Predeterminado",manageProduct:"Gestionar Productos",manageOrder:"Gestionar Órdenes",manageUser:"Gestionar Usuarios",manageRole:"Gestionar Roles",promoteAll:"Asignar Roles a Usuarios",editPassword:"Editar Contraseñas",chef:"Chef",delivery:"Repartidor"};r.useEffect(()=>{(async()=>{try{const o=await Z();d(o)}catch(o){console.error("Error al cargar roles:",o)}})()},[]);const E=i=>{k(i.id),U({...i})},v=i=>{U(o=>({...o,[i]:!o[i]}))},w=i=>{A(o=>({...o,[i]:!o[i]}))},b=async i=>{try{await he(i,p),d(o=>o.map(I=>I.id===i?{...I,...p}:I)),k(null)}catch{alert("Error al guardar los cambios.")}},R=async i=>{if(window.confirm("¿Estás seguro de que deseas eliminar este rol?"))try{await ue(i),d(I=>I.filter(z=>z.id!==i))}catch{alert("Error al Eliminar el rol.")}},O=async()=>{if(!j.name||j.name.trim()===""){alert("El nombre del rol es obligatorio.");return}try{const i=await ge(j);if(!i){alert("No se pudo crear el rol.");return}d(o=>[...o,i]),h(!1),A({name:"",default:!1,manageProduct:!1,manageOrder:!1,manageUser:!1,manageRole:!1,promoteAll:!1,editPassword:!1})}catch{alert("Error al crear el rol.")}};return e.jsx(L,{className:"mb-4",children:e.jsxs(L.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"Roles de la Plataforma"}),!c&&e.jsx(x,{size:"sm",variant:"primary",onClick:()=>h(!0),children:"Agregar Rol"})]}),e.jsxs(K,{bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center align-middle",children:"Nombre del Rol"}),N.map(i=>e.jsx("th",{className:"text-center align-middle",children:P[i]},i)),e.jsx("th",{className:"text-center align-middle",children:"Acciones"})]})}),e.jsxs("tbody",{children:[c&&e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(g.Control,{type:"text",value:j.name||"",onChange:i=>A(o=>({...o,name:i.target.value})),placeholder:"Nombre del rol"})}),N.map(i=>e.jsx("td",{className:"text-center",children:e.jsx(g.Check,{type:"checkbox",checked:j[i]||!1,onChange:()=>w(i)})},i)),e.jsxs("td",{children:[e.jsx(x,{variant:"success",size:"sm",onClick:O,children:"Crear"}),e.jsx(x,{variant:"secondary",size:"sm",className:"ms-2",onClick:()=>h(!1),children:"Cancelar"})]})]}),a.map(i=>e.jsxs("tr",{children:[e.jsx("td",{children:S===i.id?e.jsx(g.Control,{type:"text",value:p.name||"",onChange:o=>U(I=>({...I,name:o.target.value}))}):i.name}),N.map(o=>e.jsx("td",{className:"text-center",children:S===i.id?e.jsx(g.Check,{type:"checkbox",checked:p[o]||!1,onChange:()=>v(o)}):e.jsx(g.Check,{type:"checkbox",checked:i[o],disabled:!0})},o)),e.jsx("td",{children:S===i.id?e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"success",size:"sm",onClick:()=>b(i.id),children:"Guardar"}),e.jsx(x,{variant:"secondary",size:"sm",className:"ms-2",onClick:()=>k(null),children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"warning",size:"sm",onClick:()=>E(i),children:"Editar"}),e.jsx(x,{variant:"danger",size:"sm",onClick:()=>R(i.id),children:"Eliminar"})]})})]},i.id))]})]})]})})}function we({categories:a,setCategories:d}){const[S,k]=r.useState([]),[c,h]=r.useState(1),[p,U]=r.useState(10),[j,A]=r.useState(!1),[N,P]=r.useState({name:""}),[E,v]=r.useState(null),[w,b]=r.useState({name:""}),[R,O]=r.useState(null),[i,o]=r.useState(null),I=S.length,z=Math.ceil(I/p),G=S.slice((c-1)*p,c*p),B=t=>{U(Number(t.target.value)),h(1)};r.useEffect(()=>{A(!0),k(a),A(!1)},[a]);const _=async()=>{const{name:t}=N;if(t.trim()===""||!R){alert("Completa todos los campos.");return}const l=`category/${R.name.replace(/\s+/g,"_")}`;try{if(!await X(l,R))throw new Error("No se pudo subir la imagen");console.log(l);const F=await je({...N,image:l});F&&(d(D=>[...D,F]),P({name:""}),O(null))}catch(C){console.error("Error al crear categoría:",C),alert("No se pudo crear la categoría.")}},T=t=>{v(t.id),b({name:t.name})},m=async t=>{try{let s=w.name;i&&(s=`product/${i.name.replace(/\s+/g,"_")}`,await Y(s,i)),await fe(t,{...w,image:s}),d(l=>l.map(C=>C.id===t?{...C,...w,image:s}:C)),v(null),o(null)}catch{alert("Error al guardar los cambios.")}},y=async t=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta categoria?"))try{await pe(t),d(l=>l.filter(C=>C.id!==t))}catch{alert("Error al eliminar la categoría.")}};return j?e.jsx("div",{children:"Cargando categorías..."}):e.jsx(L,{className:"mb-4",children:e.jsxs(L.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"Categorías"}),e.jsxs(g.Select,{style:{width:"150px"},value:p,onChange:B,children:[e.jsx("option",{value:5,children:"5 por página"}),e.jsx("option",{value:10,children:"10 por página"}),e.jsx("option",{value:20,children:"20 por página"})]})]}),e.jsx(g,{className:"mb-4",children:e.jsxs(ee,{children:[e.jsx(M,{md:4,children:e.jsx(g.Control,{type:"file",accept:"image/*",onChange:t=>{var C;const l=((C=t.target.files)==null?void 0:C[0])||null;O(l)}})}),e.jsx(M,{md:4,children:e.jsx(g.Control,{type:"text",placeholder:"Nombre de la categoría",value:N.name,onChange:t=>P({...N,name:t.target.value})})}),e.jsx(M,{md:4,children:e.jsx(x,{onClick:_,children:"Agregar categoría"})})]})}),e.jsxs(K,{bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:G.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:E===t.id?e.jsx(g.Control,{type:"file",accept:"image/*",onChange:s=>{var F;const C=((F=s.target.files)==null?void 0:F[0])||null;o(C)}}):e.jsx(te,{src:W+t.image,alt:t.name,rounded:!0,style:{width:"60px",height:"60px",objectFit:"cover"}})}),e.jsx("td",{children:t.id}),e.jsx("td",{children:E===t.id?e.jsx(g.Control,{type:"text",value:w.name,onChange:s=>b({...w,name:s.target.value})}):t.name}),e.jsx("td",{children:E===t.id?e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"success",size:"sm",onClick:()=>m(t.id),children:"Guardar"}),e.jsx(x,{variant:"secondary",size:"sm",className:"ms-2",onClick:()=>v(null),children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"warning",size:"sm",onClick:()=>T(t),children:"Editar"}),e.jsx(x,{variant:"danger",size:"sm",className:"ms-2",onClick:()=>y(t.id),children:"Eliminar"})]})})]},t.id))})]}),z>1&&e.jsx(q,{children:Array.from({length:z},(t,s)=>e.jsx(q.Item,{active:s+1===c,onClick:()=>h(s+1),children:s+1},s+1))})]})})}function Ae(){const[a,d]=r.useState([]),[S,k]=r.useState(null),{role:c}=J(),h=[{key:"Órdenes",visible:c==null?void 0:c.manageOrder},{key:"Categorías",visible:c==null?void 0:c.manageProduct},{key:"Productos",visible:c==null?void 0:c.manageProduct},{key:"Usuarios",visible:c==null?void 0:c.manageUser},{key:"Roles",visible:c==null?void 0:c.manageRole}].filter(j=>j.visible),p=async()=>{const j=await ve();j&&d(j)};r.useEffect(()=>{c!=null&&c.manageProduct&&p()},[c==null?void 0:c.manageProduct]),r.useEffect(()=>{!S&&h.length>0&&k(h[0].key)},[h,S]);const U=()=>{switch(S){case"Órdenes":return e.jsx(Ce,{});case"Categorías":return e.jsx(we,{categories:a,setCategories:d});case"Productos":return e.jsx(ye,{categories:a});case"Usuarios":return e.jsx(Se,{});case"Roles":return e.jsx(be,{});default:return e.jsx("p",{className:"text-gray-500",children:"Sección no disponible"})}};return e.jsxs(xe,{className:"my-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Panel de Administración"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:h.map(({key:j})=>{const A=S===j;return e.jsx(x,{variant:A?"primary":"outline-primary",className:"rounded-pill d-flex align-items-center gap-2",onClick:()=>k(j),children:j},j)})}),e.jsx("div",{children:U()})]})}export{Ae as default};
