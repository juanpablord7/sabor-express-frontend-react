import{u as E,j as e,i as v,f as T,B as i,r,g as B}from"./index-ClEa-Ms0.js";import{C as u,a as F}from"./Col-C06AUG80.js";import{g as L,I as Q}from"./index-keXZwANC.js";import{R as z,P as C}from"./Row-B2-a0j2C.js";function A({id:a,name:n,price:o,image:g}){const{getItemQuantity:l,increaseQuantity:c,decreaseQuantity:x,removerFromCart:h}=E(),d=l(a);return e.jsxs(u,{className:"h-100",children:[e.jsx(u.Img,{variant:"top",src:v+g,height:"200px",style:{objectFit:"cover"}}),e.jsxs(u.Body,{className:"d-flex flex-column",children:[e.jsxs(u.Title,{className:`d-flex \r
                justify-content-between \r
                align-items-baseline mb-4`,children:[e.jsx("span",{className:"fs-5",children:n}),e.jsx("span",{className:"ms-6 text-muted",children:T(o)})]}),e.jsx("div",{className:"mt-auto",children:d===0?e.jsx(i,{className:"w-100",onClick:()=>c(a,n),children:"+ AÃ±adir al Carrito"}):e.jsxs("div",{className:`d-flex align-itmes-center\r
                        flex-column`,style:{gap:".5rem"},children:[e.jsxs("div",{className:`d-flex align-items-center\r
                            justify-content-center`,style:{gap:".5rem"},children:[e.jsx(i,{onClick:()=>x(a),children:"-"}),e.jsxs("div",{children:[e.jsxs("span",{className:"fs-3",children:[d," "]}),"en el carrito"]}),e.jsx(i,{onClick:()=>c(a,n),children:"+"})]}),e.jsx(i,{variant:"danger",size:"sm",onClick:()=>h(a),children:"Remove"})]})})]})]})}function _(){const[a,n]=r.useState(1),[o,g]=r.useState(6),[l,c]=r.useState(0),[x,h]=r.useState([]),[d,P]=r.useState(0),[S,b]=r.useState([]),[m,N]=r.useState(void 0),[k,p]=r.useState(!1);r.useEffect(()=>{I()},[]),r.useEffect(()=>{w()},[a,o,m]);const w=async()=>{p(!0);const{products:s,totalItems:t}=await B(a,o,m);h(s),await P(t),c(Math.ceil(d/o)),p(!1)},I=async()=>{try{const s=await L(),t=s.filter(f=>f.id!==0),y=s.find(f=>f.id===0);y&&t.push(y),b(t)}catch(s){console.error("Error fetching categories",s)}},R=s=>{const t=parseInt(s.target.value);g(t),n(1)},j=s=>{N(s),n(1)};return k?e.jsx("div",{children:"Cargando productos..."}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Tienda"}),e.jsxs("div",{className:"d-flex flex-wrap gap-2 mb-3",children:[e.jsx(i,{variant:m===void 0?"primary":"outline-primary",className:"rounded-pill d-flex align-items-center gap-2",onClick:()=>j(void 0),children:"Todos"}),S.map(s=>e.jsxs(i,{variant:m===s.id?"primary":"outline-primary",className:"rounded-pill d-flex align-items-center gap-2",onClick:()=>j(s.id),children:[e.jsx(Q,{src:v+s.image,width:24,height:24,roundedCircle:!0}),s.name]},s.id))]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"1.5rem"},children:e.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"0.5rem",padding:"0.75rem 1rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("label",{htmlFor:"itemsPerPage",style:{margin:0,fontWeight:500,color:"#495057"},children:"Mostrar:"}),e.jsxs("select",{id:"itemsPerPage",value:o,onChange:R,style:{border:"1px solid #ced4da",borderRadius:"0.375rem",padding:"0.25rem 0.5rem",backgroundColor:"#fff",color:"#212529",fontSize:"1rem",cursor:"pointer"},children:[e.jsx("option",{value:6,children:"6 Productos"}),e.jsx("option",{value:10,children:"10 Productos"}),e.jsx("option",{value:20,children:"20 Productos"})]})]})}),e.jsx(z,{lg:3,md:2,className:"g-3",children:x.map(s=>e.jsx(F,{children:e.jsx(A,{...s})},s.id))}),l>1&&e.jsx(C,{children:Array.from({length:l},(s,t)=>e.jsx(C.Item,{active:t+1===a,onClick:()=>{console.log(t+1),n(t+1)},children:t+1},t+1))})]})}export{_ as default};
